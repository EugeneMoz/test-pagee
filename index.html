<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<button style="display: block;" class="ticket-button">Test button</button>

<div id="test-share-panel" style="display: none;">
    <div id="referral-url-copy-input" tabindex="0" aria-label="העתק" class="test-copy-input"><input
            value="https://test.call/z/123332" readonly="readonly" tabindex="-1">
        <button type="button" data-caption-text="copy" data-original-text="copy" tabindex="-1" class="copy-input-btn">
            <span class="copy-input-original-text">copy</span><span class="copy-input-caption-text">copy</span>
        </button>
    </div>
</div>
<script>(function () {

    // async function shareImage() {
    //     const blob = await fetch('https://cdn.glitch.com/f96f78ec-d35d-447b-acf4-86f2b3658491%2Fchuck.png?v=1618311092497').then(r=>r.blob());
    //     const data = {
    //         files: [
    //             new File([blob], 'file.png', {
    //                 type: blob.type,
    //             }),
    //         ],
    //         title: 'Share link title',
    //         text: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci aut corporis doloremque est ipsa, ipsam laboriosam libero minima quibusdam sed! Adipisci atque eos esse reiciendis rem, rerum saepe. Culpa, sed.',
    //         url: 'https://test-link/z/customUUID'
    //     };
    //     try {
    //         if (!(navigator.canShare(data))) {
    //             throw new Error("Can't share data.", data);
    //         }
    //         await navigator.share(data);
    //     } catch (err) {
    //         console.error(err.name, err.message);
    //     }
    // }
    //
    // shareImage();

    var _z = 'https://loox.io/z/EJ4G1pJZ6';

    var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
    var android = !iOS && /android/i.test(navigator.userAgent);
    var isMobile = iOS || android;
    if(navigator.share && isMobile) {

        var shareButton = document.querySelector('.ticket-button');

        shareButton.addEventListener('click', function (e) {

            return navigator.share({ title: '', text: '', url: _z });
        });
    }
})();</script>
</body>
</html>
